import { GamepadModel, GamepadList } from "gamepad-list.slint";
import { AppIconModel, AppIconList } from "appicon-list.slint";
import { Background } from "background.slint";

export component MainWindow inherits Window {
    in property <[GamepadModel]> gamepad_list <=> gamepad-list.model;
    in property <[AppIconModel]> app_list <=> app-list.model;

    in property <string> clock_text <=> clock.text;

    callback app_icon_activated <=> app-list.item_activated;

    forward-focus: app-list;

    bg := Background {
        background: #166dbb;
    }

    VerticalLayout {
        alignment: stretch;

        gamepad-list := GamepadList {
            height: 32px;
            alignment: start;
        }

        clock := Text {
            text: "00:00";
            //color: white;
            font-family: "Ubuntu";
            font-size: 270px;
            font-weight: 500;
            horizontal-alignment: center;
            vertical-alignment: center;
            wrap: word-wrap;
        }

        HorizontalLayout {
            alignment: center;
            app-list := AppIconList {
                icon-size: 128px;
            }
        }

        spacer := Rectangle {
            height: app-list.height / 2;
        }
    }

    public function set_child_process_state(is_running: bool) {
        app-list.is-interactive = !is_running;
    }

    // Workaround for https://github.com/slint-ui/slint/issues/2201
    public function take_focus_workaround() {
        root.focus();
    }
}